<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PY Timeline</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">PY TIMELINE</div>
    <div class="transport">
      <button id="btnInit" class="btn">Init</button>
      <button id="btnPlay" class="btn">Play</button>
      <button id="btnStop" class="btn">Stop</button>
      <button id="btnRender" class="btn primary">Render WAV</button>
      <button id="btnSaveProj" class="btn">Save</button>
      <button id="btnLoadProj" class="btn">Load</button>
      <input id="fileProj" type="file" accept=".json,application/json" style="display:none"/>

      <div class="sp"></div>

      <label class="mini">Time</label>
      <select id="timeMode" class="select">
        <option value="sec">Seconds</option>
        <option value="bbt">BBT</option>
      </select>

      <label class="mini">Zoom</label>
      <input id="zoom" class="range" type="range" min="0.25" max="8" step="0.05" value="1"/>
    </div>
  </header>

  <main class="layout">
    <aside class="left">
      <section class="panel">
        <div class="panelTitle">Global</div>
        <div class="grid2">
          <label>SR</label>
          <select id="sr" class="select">
            <option>22050</option><option>32000</option><option selected>44100</option><option>48000</option><option>96000</option>
          </select>
          <label>Bits</label>
          <select id="bits" class="select">
            <option>8</option><option>12</option><option selected>16</option><option>24</option><option>32</option>
          </select>
          <label>Snap</label>
          <input id="snap" class="input" type="number" step="0.001" value="0"/>
          <label>Worker</label>
          <input id="useWorker" type="checkbox" checked/>
        </div>
        <div class="hint">Snap 0 uses the selected track’s tempo grid.</div>
      </section>

      <section class="panel">
        <div class="row between">
          <div class="panelTitle">Tracks</div>
          <button id="btnAddTrack" class="btn">+ Track</button>
        </div>
        <div id="trackList" class="trackList"></div>
      </section>

      <section class="panel">
        <div class="row between">
          <div class="panelTitle">Clips</div>
          <div class="row">
            <button id="btnLoadPy" class="btn">Load .py</button>
            <button id="btnLoadWav" class="btn">Load .wav</button>
          </div>
        </div>
        <div id="clipBin" class="clipBin"></div>
      </section>

      <section class="panel">
        <div class="panelTitle">Selected</div>
        <div id="selected" class="selected"></div>
      </section>
    </aside>

    <section class="right">
      <canvas id="tl" class="timeline"></canvas>
      <div class="footerLine"><div id="status" class="status">Ready.</div></div>
    </section>
  </main>

  <input id="filePy" type="file" accept=".py,text/x-python" hidden/>
  <input id="fileWav" type="file" accept=".wav,audio/wav" hidden/>

  <!-- Python editor modal -->
  <div id="pyEditorModal" class="modal hidden" aria-hidden="true">
    <div class="modalInner">
      <div class="modalHead">
        <div class="modalTitle" id="pyEditorTitle">Edit .py</div>
        <div class="row" style="gap:8px">
          <button id="btnPySave" class="btn primary">Save</button>
          <button id="btnPyCancel" class="btn">Exit</button>
        </div>
      </div>
      <textarea id="pyEditor" class="pyEditor" spellcheck="false"></textarea>
      <div class="modalFoot">Ctrl/Cmd+Enter = Save • Esc = Exit</div>
    </div>
  </div>

  <script src="wav.js"></script>
  <script src="app.js"></script>
</body>
</html>
